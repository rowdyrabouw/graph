"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var router_1 = require("@angular/router");
var page_1 = require("ui/page");
var GraphComponent = (function () {
    function GraphComponent(router, page) {
        this.router = router;
        this.page = page;
    }
    GraphComponent.prototype.ngOnInit = function () {
        // console.log(platformModule.screen.mainScreen.widthPixels);
        this.aowAgeItem = this.aowAge.nativeElement;
        this.dragAgeItem = this.dragAge.nativeElement;
        this.dragTargetItem = this.dragTarget.nativeElement;
        this.dragGraphItem = this.draghGraph.nativeElement;
        this.dragGraphItem.setInlineStyle('margin-left: -200');
        this.positionAgeX = this.dragAgeItem.left;
        this.positionTargetY = this.dragTargetItem.top;
    };
    GraphComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.draghGraph.nativeElement.on('pan,tap', function (args) {
            switch (args.eventName) {
                case 'pan':
                    _this.onPanGraph(args);
                    break;
                case 'tap':
                    _this.onTapGraph(args);
                    break;
            }
        });
        this.dragAge.nativeElement.on('pan,tap', function (args) {
            switch (args.eventName) {
                case 'pan':
                    _this.onPanAge(args);
                    break;
                case 'tap':
                    _this.onTapAge(args);
                    break;
            }
        });
        this.dragTarget.nativeElement.on('pan,tap', function (args) {
            switch (args.eventName) {
                case 'pan':
                    _this.onPanTarget(args);
                    break;
                case 'tap':
                    _this.onTapAge(args);
                    break;
            }
        });
    };
    GraphComponent.prototype.ngOnDestroy = function () {
    };
    GraphComponent.prototype.onPanGraph = function (args) {
        if (args.state === 1) {
            this.prevDeltaXaow = 0;
            this.prevDeltaXage = 0;
            this.prevDeltaXtarget = 0;
            this.prevDeltaYtarget = 0;
            this.prevDeltaXgraph = 0;
            this.prevDeltaYgraph = 0;
        }
        else if (args.state === 2) {
            this.dragGraphItem.translateX += args.deltaX - this.prevDeltaXgraph;
            this.dragGraphItem.translateY = 0;
            this.aowAgeItem.translateX += args.deltaX - this.prevDeltaXaow;
            this.dragAgeItem.translateX += args.deltaX - this.prevDeltaXage;
            this.dragTargetItem.translateX += args.deltaX - this.prevDeltaXtarget;
            this.prevDeltaXaow = args.deltaX;
            this.prevDeltaXage = args.deltaX;
            this.prevDeltaXgraph = args.deltaX;
            this.prevDeltaYgraph = args.deltaY;
            this.prevDeltaXtarget = args.deltaX;
            this.prevDeltaYtarget = args.deltaY;
        }
        else if (args.state === 3) {
        }
    };
    GraphComponent.prototype.onPanTarget = function (args) {
        if (args.state === 1) {
            this.prevDeltaXtarget = 0;
            this.prevDeltaYtarget = 0;
        }
        if (args.state === 2) {
            this.dragTargetItem.translateX = 0;
            this.dragTargetItem.translateY += args.deltaY - this.prevDeltaYtarget;
            this.prevDeltaXtarget = 0;
            this.prevDeltaYtarget = args.deltaY;
        }
        else if (args.state === 3) {
            this.positionTargetY += args.deltaY;
            console.log('onPanTarget finished: recalculate, position: ' + this.positionTargetY);
        }
    };
    GraphComponent.prototype.onPanAge = function (args) {
        if (args.state === 1) {
            this.prevDeltaXage = 0;
            this.prevDeltaYage = 0;
        }
        if (args.state === 2) {
            this.dragAgeItem.translateX += args.deltaX - this.prevDeltaXage;
            this.dragAgeItem.translateY = 0;
            this.prevDeltaXage = args.deltaX;
            this.prevDeltaYage = args.deltaY;
        }
        else if (args.state === 3) {
            this.positionAgeX += args.deltaX;
            console.log('onPanAge finished: recalculate, position: ' + this.positionAgeX);
        }
    };
    GraphComponent.prototype.onTapGraph = function ($event) {
        alert('onTap: show zoom dialog');
    };
    GraphComponent.prototype.onTapAow = function ($event) {
        alert('onTapAow: show current aow age');
    };
    GraphComponent.prototype.onTapAge = function ($event) {
        alert('onTapAge: show current pension age');
    };
    GraphComponent.prototype.onTapTarget = function ($event) {
        alert('onTapTarget: show current target income');
    };
    return GraphComponent;
}());
__decorate([
    core_1.ViewChild("aowAge"),
    __metadata("design:type", core_1.ElementRef)
], GraphComponent.prototype, "aowAge", void 0);
__decorate([
    core_1.ViewChild("dragAge"),
    __metadata("design:type", core_1.ElementRef)
], GraphComponent.prototype, "dragAge", void 0);
__decorate([
    core_1.ViewChild("dragTarget"),
    __metadata("design:type", core_1.ElementRef)
], GraphComponent.prototype, "dragTarget", void 0);
__decorate([
    core_1.ViewChild("dragGraph"),
    __metadata("design:type", core_1.ElementRef)
], GraphComponent.prototype, "draghGraph", void 0);
GraphComponent = __decorate([
    core_1.Component({
        moduleId: module.id,
        selector: "graph",
        templateUrl: "graph.component.html"
    }),
    __metadata("design:paramtypes", [router_1.Router, page_1.Page])
], GraphComponent);
exports.GraphComponent = GraphComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGguY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZ3JhcGguY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBSUEsc0NBQW1HO0FBS25HLDBDQUF5QztBQUN6QyxnQ0FBK0I7QUFPL0IsSUFBYSxjQUFjO0lBdUJ2Qix3QkFBb0IsTUFBYyxFQUFVLElBQVU7UUFBbEMsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFVLFNBQUksR0FBSixJQUFJLENBQU07SUFDdEQsQ0FBQztJQUVELGlDQUFRLEdBQVI7UUFDSSw2REFBNkQ7UUFDN0QsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUM1QyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO1FBQzlDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUM7UUFDcEQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQztRQUNuRCxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBQ3ZELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7UUFDMUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQztJQUNuRCxDQUFDO0lBRUQsd0NBQWUsR0FBZjtRQUFBLGlCQWdDQztRQS9CRyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFVBQUMsSUFBSTtZQUM3QyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDckIsS0FBSyxLQUFLO29CQUNOLEtBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3RCLEtB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QVMsQ0FBQyxZQUFZLENBQUM7OEJBQWEsaUJBQVU7a0RBQUM7QUFDeEI7SUFBdkIsZ0JBQVMsQ0FBQyxXQUFXLENBQUM7OEJBQWEsaUJBQVU7a0RBQUM7QUFMdEMsY0FBYztJQUwxQixnQkFBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1FBQ25CLFFBQVEsRUFBRSxPQUFPO1FBQ2pCLFdBQVcsRUFBRSxzQkFBc0I7S0FDdEMsQ0FBQztxQ0F3QjhCLGVBQU0sRUFBZ0IsV0FBSTtHQXZCN0MsY0FBYyxDQTBKMUI7QUExSlksd0NBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwbGF0Zm9ybU1vZHVsZSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9wbGF0Zm9ybVwiO1xuXG5pbXBvcnQgeyBTY3JvbGxFdmVudERhdGEgfSBmcm9tIFwidWkvc2Nyb2xsLXZpZXdcIjtcbmltcG9ydCB7IFBhbkdlc3R1cmVFdmVudERhdGEgfSBmcm9tIFwidWkvZ2VzdHVyZXNcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBPbkRlc3Ryb3ksIEVsZW1lbnRSZWYsIFZpZXdDaGlsZCwgQWZ0ZXJWaWV3SW5pdCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBTd2lzc0FybXlLbmlmZSB9IGZyb20gXCJuYXRpdmVzY3JpcHQtc3dpc3MtYXJteS1rbmlmZVwiO1xuXG5pbXBvcnQgeyBHZXN0dXJlVHlwZXMsIFN3aXBlR2VzdHVyZUV2ZW50RGF0YSB9IGZyb20gXCJ1aS9nZXN0dXJlc1wiO1xuaW1wb3J0IHsgQW5pbWF0aW9uQ3VydmUgfSBmcm9tIFwidWkvZW51bXNcIjtcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwidWkvcGFnZVwiO1xuXG5AQ29tcG9uZW50KHtcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHNlbGVjdG9yOiBcImdyYXBoXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiZ3JhcGguY29tcG9uZW50Lmh0bWxcIlxufSlcbmV4cG9ydCBjbGFzcyBHcmFwaENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBBZnRlclZpZXdJbml0IHtcblxuICAgIEBWaWV3Q2hpbGQoXCJhb3dBZ2VcIikgYW93QWdlOiBFbGVtZW50UmVmO1xuICAgIEBWaWV3Q2hpbGQoXCJkcmFnQWdlXCIpIGRyYWdBZ2U6IEVsZW1lbnRSZWY7XG4gICAgQFZpZXdDaGlsZChcImRyYWdUYXJnZXRcIikgZHJhZ1RhcmdldDogRWxlbWVudFJlZjtcbiAgICBAVmlld0NoaWxkKFwiZHJhZ0dyYXBoXCIpIGRyYWdoR3JhcGg6IEVsZW1lbnRSZWY7XG5cbiAgICBhb3dBZ2VJdGVtO1xuICAgIGRyYWdBZ2VJdGVtO1xuICAgIGRyYWdUYXJnZXRJdGVtO1xuICAgIGRyYWdHcmFwaEl0ZW07XG5cbiAgICBwcmV2RGVsdGFYYW93OiBudW1iZXI7XG4gICAgcHJldkRlbHRhWGFnZTogbnVtYmVyO1xuICAgIHByZXZEZWx0YVlhZ2U6IG51bWJlcjtcbiAgICBwcmV2RGVsdGFYdGFyZ2V0OiBudW1iZXI7XG4gICAgcHJldkRlbHRhWXRhcmdldDogbnVtYmVyO1xuICAgIHByZXZEZWx0YVhncmFwaDogbnVtYmVyO1xuICAgIHByZXZEZWx0YVlncmFwaDogbnVtYmVyO1xuXG4gICAgcG9zaXRpb25BZ2VYOiBudW1iZXI7XG4gICAgcG9zaXRpb25UYXJnZXRZOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJvdXRlcjogUm91dGVyLCBwcml2YXRlIHBhZ2U6IFBhZ2UsICkge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhwbGF0Zm9ybU1vZHVsZS5zY3JlZW4ubWFpblNjcmVlbi53aWR0aFBpeGVscyk7XG4gICAgICAgIHRoaXMuYW93QWdlSXRlbSA9IHRoaXMuYW93QWdlLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZHJhZ0FnZUl0ZW0gPSB0aGlzLmRyYWdBZ2UubmF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0SXRlbSA9IHRoaXMuZHJhZ1RhcmdldC5uYXRpdmVFbGVtZW50O1xuICAgICAgICB0aGlzLmRyYWdHcmFwaEl0ZW0gPSB0aGlzLmRyYWdoR3JhcGgubmF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5kcmFnR3JhcGhJdGVtLnNldElubGluZVN0eWxlKCdtYXJnaW4tbGVmdDogLTIwMCcpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uQWdlWCA9IHRoaXMuZHJhZ0FnZUl0ZW0ubGVmdDtcbiAgICAgICAgdGhpcy5wb3NpdGlvblRhcmdldFkgPSB0aGlzLmRyYWdUYXJnZXRJdGVtLnRvcDtcbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuZHJhZ2hHcmFwaC5uYXRpdmVFbGVtZW50Lm9uKCdwYW4sdGFwJywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5ldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdwYW4nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUGFuR3JhcGgoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RhcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25UYXBHcmFwaChhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZHJhZ0FnZS5uYXRpdmVFbGVtZW50Lm9uKCdwYW4sdGFwJywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5ldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdwYW4nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUGFuQWdlKGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0YXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVGFwQWdlKGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZHJhZ1RhcmdldC5uYXRpdmVFbGVtZW50Lm9uKCdwYW4sdGFwJywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5ldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdwYW4nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUGFuVGFyZ2V0KGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0YXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVGFwQWdlKGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgfVxuXG4gICAgb25QYW5HcmFwaChhcmdzOiBQYW5HZXN0dXJlRXZlbnREYXRhKSB7XG4gICAgICAgIGlmIChhcmdzLnN0YXRlID09PSAxKSB7IC8vIGRvd25cbiAgICAgICAgICAgIHRoaXMucHJldkRlbHRhWGFvdyA9IDA7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVhhZ2UgPSAwO1xuICAgICAgICAgICAgdGhpcy5wcmV2RGVsdGFYdGFyZ2V0ID0gMDtcbiAgICAgICAgICAgIHRoaXMucHJldkRlbHRhWXRhcmdldCA9IDA7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVhncmFwaCA9IDA7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVlncmFwaCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXJncy5zdGF0ZSA9PT0gMikgLy8gcGFubmluZ1xuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRyYWdHcmFwaEl0ZW0udHJhbnNsYXRlWCArPSBhcmdzLmRlbHRhWCAtIHRoaXMucHJldkRlbHRhWGdyYXBoO1xuICAgICAgICAgICAgdGhpcy5kcmFnR3JhcGhJdGVtLnRyYW5zbGF0ZVkgPSAwO1xuXG4gICAgICAgICAgICB0aGlzLmFvd0FnZUl0ZW0udHJhbnNsYXRlWCArPSBhcmdzLmRlbHRhWCAtIHRoaXMucHJldkRlbHRhWGFvdztcbiAgICAgICAgICAgIHRoaXMuZHJhZ0FnZUl0ZW0udHJhbnNsYXRlWCArPSBhcmdzLmRlbHRhWCAtIHRoaXMucHJldkRlbHRhWGFnZTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1RhcmdldEl0ZW0udHJhbnNsYXRlWCArPSBhcmdzLmRlbHRhWCAtIHRoaXMucHJldkRlbHRhWHRhcmdldDtcblxuICAgICAgICAgICAgdGhpcy5wcmV2RGVsdGFYYW93ID0gYXJncy5kZWx0YVg7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVhhZ2UgPSBhcmdzLmRlbHRhWDtcbiAgICAgICAgICAgIHRoaXMucHJldkRlbHRhWGdyYXBoID0gYXJncy5kZWx0YVg7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVlncmFwaCA9IGFyZ3MuZGVsdGFZO1xuICAgICAgICAgICAgdGhpcy5wcmV2RGVsdGFYdGFyZ2V0ID0gYXJncy5kZWx0YVg7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVl0YXJnZXQgPSBhcmdzLmRlbHRhWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcmdzLnN0YXRlID09PSAzKSAvLyB1cFxuICAgICAgICB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblBhblRhcmdldChhcmdzOiBQYW5HZXN0dXJlRXZlbnREYXRhKSB7XG4gICAgICAgIGlmIChhcmdzLnN0YXRlID09PSAxKSB7IC8vZG93blxuICAgICAgICAgICAgdGhpcy5wcmV2RGVsdGFYdGFyZ2V0ID0gMDtcbiAgICAgICAgICAgIHRoaXMucHJldkRlbHRhWXRhcmdldCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFyZ3Muc3RhdGUgPT09IDIpIHsgLy8gcGFubmluZ1xuICAgICAgICAgICAgdGhpcy5kcmFnVGFyZ2V0SXRlbS50cmFuc2xhdGVYID0gMDtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1RhcmdldEl0ZW0udHJhbnNsYXRlWSArPSBhcmdzLmRlbHRhWSAtIHRoaXMucHJldkRlbHRhWXRhcmdldDtcbiAgICAgICAgICAgIHRoaXMucHJldkRlbHRhWHRhcmdldCA9IDA7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVl0YXJnZXQgPSBhcmdzLmRlbHRhWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcmdzLnN0YXRlID09PSAzKSB7IC8vIHVwXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uVGFyZ2V0WSArPSBhcmdzLmRlbHRhWTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvblBhblRhcmdldCBmaW5pc2hlZDogcmVjYWxjdWxhdGUsIHBvc2l0aW9uOiAnICsgdGhpcy5wb3NpdGlvblRhcmdldFkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25QYW5BZ2UoYXJnczogUGFuR2VzdHVyZUV2ZW50RGF0YSkge1xuICAgICAgICBpZiAoYXJncy5zdGF0ZSA9PT0gMSkgeyAvL2Rvd25cbiAgICAgICAgICAgIHRoaXMucHJldkRlbHRhWGFnZSA9IDA7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVlhZ2UgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLnN0YXRlID09PSAyKSB7IC8vIHBhbm5pbmdcbiAgICAgICAgICAgIHRoaXMuZHJhZ0FnZUl0ZW0udHJhbnNsYXRlWCArPSBhcmdzLmRlbHRhWCAtIHRoaXMucHJldkRlbHRhWGFnZTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0FnZUl0ZW0udHJhbnNsYXRlWSA9IDA7XG4gICAgICAgICAgICB0aGlzLnByZXZEZWx0YVhhZ2UgPSBhcmdzLmRlbHRhWDtcbiAgICAgICAgICAgIHRoaXMucHJldkRlbHRhWWFnZSA9IGFyZ3MuZGVsdGFZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFyZ3Muc3RhdGUgPT09IDMpIHsgLy8gdXBcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25BZ2VYICs9IGFyZ3MuZGVsdGFYO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ29uUGFuQWdlIGZpbmlzaGVkOiByZWNhbGN1bGF0ZSwgcG9zaXRpb246ICcgKyB0aGlzLnBvc2l0aW9uQWdlWCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblRhcEdyYXBoKCRldmVudCkge1xuICAgICAgICBhbGVydCgnb25UYXA6IHNob3cgem9vbSBkaWFsb2cnKTtcbiAgICB9XG5cbiAgICBvblRhcEFvdygkZXZlbnQpIHtcbiAgICAgICAgYWxlcnQoJ29uVGFwQW93OiBzaG93IGN1cnJlbnQgYW93IGFnZScpO1xuICAgIH1cblxuICAgIG9uVGFwQWdlKCRldmVudCkge1xuICAgICAgICBhbGVydCgnb25UYXBBZ2U6IHNob3cgY3VycmVudCBwZW5zaW9uIGFnZScpO1xuICAgIH1cblxuICAgIG9uVGFwVGFyZ2V0KCRldmVudCkge1xuICAgICAgICBhbGVydCgnb25UYXBUYXJnZXQ6IHNob3cgY3VycmVudCB0YXJnZXQgaW5jb21lJyk7XG4gICAgfVxuXG59XG4iXX0=